<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Instructions - ExamPortal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .instruction-card {
            border-left: 4px solid #dc3545;
        }
        .rule-item {
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 3px solid #28a745;
        }
        .violation-item {
            padding: 10px;
            margin: 5px 0;
            background: #fff5f5;
            border-radius: 8px;
            border-left: 3px solid #dc3545;
        }
    </style>
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-danger">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-exclamation-triangle me-2"></i>Exam Instructions
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card instruction-card shadow">
                    <div class="card-header bg-danger text-white">
                        <h4 class="mb-0">
                            <i class="fas fa-shield-alt me-2"></i>
                            IMPORTANT: Anti-Cheating System Active
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning">
                            <h5><i class="fas fa-exclamation-triangle me-2"></i>READ CAREFULLY BEFORE STARTING</h5>
                            <p class="mb-0">This exam is monitored by an advanced anti-cheating system. Violations will result in automatic termination.</p>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="text-success"><i class="fas fa-check-circle me-2"></i>Exam Rules</h5>
                                <div class="rule-item">
                                    <i class="fas fa-desktop me-2 text-primary"></i>
                                    <strong>Stay in fullscreen mode</strong> throughout the exam
                                </div>
                                <div class="rule-item">
                                    <i class="fas fa-eye me-2 text-primary"></i>
                                    <strong>Keep this tab active</strong> - don't switch to other tabs/windows
                                </div>
                                <div class="rule-item">
                                    <i class="fas fa-mouse me-2 text-primary"></i>
                                    <strong>Use only left-click</strong> - right-click is disabled
                                </div>
                                <div class="rule-item">
                                    <i class="fas fa-keyboard me-2 text-primary"></i>
                                    <strong>No copy/paste</strong> - keyboard shortcuts are monitored
                                </div>
                                <div class="rule-item">
                                    <i class="fas fa-clock me-2 text-primary"></i>
                                    <strong>Time limit:</strong> <span th:text="${exam.durationMinutes}">60</span> minutes
                                </div>
                            </div>

                            <div class="col-md-6">
                                <h5 class="text-danger"><i class="fas fa-ban me-2"></i>Prohibited Actions</h5>
                                <div class="violation-item">
                                    <i class="fas fa-window-restore me-2 text-danger"></i>
                                    Switching tabs or opening new windows
                                </div>
                                <div class="violation-item">
                                    <i class="fas fa-minimize me-2 text-danger"></i>
                                    Minimizing the browser window
                                </div>
                                <div class="violation-item">
                                    <i class="fas fa-copy me-2 text-danger"></i>
                                    Copy, cut, paste operations (Ctrl+C, Ctrl+V, Ctrl+X)
                                </div>
                                <div class="violation-item">
                                    <i class="fas fa-tools me-2 text-danger"></i>
                                    Opening developer tools (F12, Ctrl+Shift+I)
                                </div>
                                <div class="violation-item">
                                    <i class="fas fa-mouse-pointer me-2 text-danger"></i>
                                    Right-clicking or context menu
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info mt-4">
                            <h6><i class="fas fa-info-circle me-2"></i>Grace Chance Policy</h6>
                            <p class="mb-0">
                                <strong>You get ONE grace chance.</strong> The first violation will show a warning. 
                                The second violation will automatically terminate your exam with zero marks.
                            </p>
                        </div>

                        <div class="alert alert-secondary">
                            <h6><i class="fas fa-laptop me-2"></i>Technical Requirements</h6>
                            <ul class="mb-0">
                                <li>Stable internet connection</li>
                                <li>Modern web browser (Chrome, Firefox, Safari, Edge)</li>
                                <li>JavaScript enabled</li>
                                <li>Fullscreen capability</li>
                            </ul>
                        </div>

                        <div class="text-center mt-4">
                            <div class="form-check d-inline-block me-4">
                                <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                                <label class="form-check-label" for="agreeTerms">
                                    I have read and understood all the rules and agree to comply
                                </label>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <a th:href="@{/student/dashboard}" class="btn btn-secondary me-3">
                                <i class="fas fa-arrow-left me-2"></i>Cancel
                            </a>
                            <button id="startExamBtn" class="btn btn-danger btn-lg" disabled onclick="startExam()">
                                <i class="fas fa-play me-2"></i>Start Exam
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('agreeTerms').addEventListener('change', function() {
            document.getElementById('startExamBtn').disabled = !this.checked;
        });

        function startExam() {
            // Final confirmation
            if (confirm('Are you ready to start the exam? Once started, the anti-cheating system will be active.')) {
                window.location.href = '/exams/[[${exam.id}]]/interface';
            }
        }
    </script>
</body>
</html>